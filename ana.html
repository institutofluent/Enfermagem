<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Verificação</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      background-color: #f2f2f2;
    }

    .topo {
      background-color: white;
      width: 100%;
      height: 140px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .topo2 {
      background-color: #ff6600;
      width: 100%;
      height: calc(140px / 3);
    }

    .layout {
      background-color: #0057db;
      width: 80%;
      margin: 60px auto;
      height: 200px;
      border-radius: 20px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .layout span {
      font-family: 'Trebuchet MS', sans-serif;
      font-size: 42px;
      font-weight: bold;
      color: white;
    }

    .conteudo {
      width: 100%;
      margin: 60px auto 0 auto;
      padding: 0;
    }

    .conteudo .imagem {
      float: right;
      width: 40%;
      min-width: 250px;
      border-radius: 10px;
      margin: 0 30px 15px 15px;
    }

    .conteudo .texto {
      font-size: 20px;
      color: #333;
      line-height: 1.6;
      font-style: italic;
      font-weight: 300;
      margin: 0 35px;
    }

    .conteudo .dados {
      font-size: 17px;
      font-weight: bold;
      font-style: normal;
      color: #666;
      margin: 55px 35px 0 35px;
      line-height: 1.3;
      white-space: pre-line;
    }

    .conteudo .dados span {
      color: black;
      font-weight: bold;
    }

    .linha-final {
      background-color: darkcyan;
      width: 100%;
      height: 18px;
      margin: 40px 0 0 0;
      border-radius: 0;
    }

    /* wrapper que contém a imagem final como background */
    .imagem-final-wrap {
      width: 100%;
      background-image: url('imagem-final.png'); /* coloque o arquivo na mesma pasta */
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      margin-top: 60px;   /* pequena margem entre a linha e a imagem */
      min-height: 200px;  /* fallback pequeno; será ajustado por JS */
      display: block;
      line-height: 0;     /* evita gaps em alguns navegadores */
    }

    .whatsapp-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 40px 50px;
      background: rgba(0,0,0,0.6);
      border-radius: 70px;
      cursor: pointer;
      width: 450px;
      height: 120px;
      text-decoration: none;
      z-index: 9999;
    }

    .whatsapp-btn span {
      color: white;
      font-size: 50px;
      font-weight: bold;
      white-space: nowrap;
    }

    .whatsapp-btn img {
      width: 140px;
      height: 140px;
      margin-left: 25px;
    }

    .whatsapp-btn:hover {
      background: rgba(0,0,0,0.8);
    }
  </style>
</head>
<body>

  <div class="topo"><img src="unicorp.png" style="height:170px;" alt="logo"></div>
  <div class="topo2"></div>
  <div class="layout"><span>Documento emitido pela Instituição</span></div>

  <div class="conteudo">
    <img src="imagem.png" alt="Imagem Institucional" class="imagem">
    <div class="texto">
      <p>
        O código informado se refere a um documento devidamente emitido pela nossa instituição, porém a conferência dos dados apresentados é de inteira responsabilidade do usuário que está efetuando a validação do documento, verifique se os dados abaixos são o mesmo do documento impresso/original:
      </p>
    </div>

    <div class="dados" id="dados"></div>

    <div class="linha-final"></div>

    <!-- wrapper com background; será esticado para cobrir toda a rolagem até embaixo -->
    <div id="imagemFinalWrap" class="imagem-final-wrap" aria-hidden="true"></div>
  </div>

  <a href="https://wa.me/5585985256372" target="_blank" class="whatsapp-btn">
    <span>Fale Conosco</span>
    <img src="whatsapp.png" alt="WhatsApp">
  </a>

  <script>
    // preenche os rótulos a partir de preencher.html (6 linhas)
    function preencherDadosTexto(texto) {
      const linhas = texto.trim().split('\n');
      const div = document.getElementById('dados');
      div.innerHTML =
        "CÓDIGO: <span>" + (linhas[0] || "") + "</span><br>" +
        "DATA DE EMISSÃO: <span>" + (linhas[1] || "") + "</span><br>" +
        "ALUNO: <span>" + (linhas[2] || "") + "</span><br>" +
        "CPF: <span>" + (linhas[3] || "") + "</span><br>" +
        "CURSO: <span>" + (linhas[4] || "") + "</span><br>" +
        "DOCUMENTO: <span>" + (linhas[5] || "") + "</span>";
    }

    // ajusta o wrapper da imagem final para que ele SEJA alto o suficiente
    // para eliminar qualquer espaço branco abaixo (cobre a rolagem até o fim)
    function ajustarWrapFinal() {
      const wrap = document.getElementById('imagemFinalWrap');
      if (!wrap) return;

      // calcula topo do wrapper em relação à viewport
      const rect = wrap.getBoundingClientRect();
      let top = rect.top;

      // se o elemento ainda não foi inserido corretamente no layout, tenta de novo
      // (proteção contra execução prematura)
      if (Number.isNaN(top)) return;

      // altura necessária para cobrir a viewport a partir do topo do wrapper
      const requiredToViewportBottom = Math.max(window.innerHeight - top, 0);

      // também garantia de cobrir se o wrapper estiver acima da viewport
      // (ex: top < 0) => requiredToViewportBottom > innerHeight, ok.
      // definimos minHeight para essa altura
      wrap.style.minHeight = requiredToViewportBottom + 'px';

      // Força também que o documento contenha o wrapper na sua altura total:
      // quando wrapper cresce ele naturalmente aumenta a altura do documento.
      // Garante recálculo no próximo frame para evitar glitches.
      requestAnimationFrame(() => {
        // se ainda houver um pequeno gap por arredondamento, adiciona 1px extra
        const docH = document.documentElement.scrollHeight;
        if (docH < window.innerHeight) {
          wrap.style.minHeight = (requiredToViewportBottom + 1) + 'px';
        }
      });
    }

    // tenta ajustar repetidamente por alguns ciclos (ajuda quando recursos/ imagens demoram)
    function ensureAdjusted(retries = 0) {
      ajustarWrapFinal();
      if (retries < 12) {
        setTimeout(() => ensureAdjusted(retries + 1), 80);
      }
    }

    window.addEventListener('load', () => {
      // preenche dados e então ajusta
      fetch('preencher.html')
        .then(r => r.text())
        .then(t => {
          preencherDadosTexto(t);
          // após inserir dados, garantir ajuste
          setTimeout(() => ensureAdjusted(0), 40);
        })
        .catch(() => {
          // mesmo se falhar, tenta ajustar
          setTimeout(() => ensureAdjusted(0), 40);
        });

      // ajustar quando redimensionar janela
      window.addEventListener('resize', ajustarWrapFinal);

      // também observar mudanças no DOM que possam alterar alturas acima:
      // MutationObserver que chama ajustarWrapFinal quando algo muda na .conteudo
      const conteudo = document.querySelector('.conteudo');
      if (conteudo) {
        const mo = new MutationObserver(() => {
          setTimeout(ajustarWrapFinal, 40);
        });
        mo.observe(conteudo, { childList: true, subtree: true, characterData: true });
      }

      // tentativa inicial
      setTimeout(ajustarWrapFinal, 80);
    });
  </script>

</body>
</html>
