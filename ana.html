<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Verificação</title>
  <style>
    html, body {
      height: 100%;
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    .topo {
      background-color: white;
      width: 100%;
      height: 140px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .topo2 {
      background-color: #ff6600;
      width: 100%;
      height: calc(140px / 3);
    }

    .layout {
      background-color: #0057db;
      width: 80%;
      margin: 60px auto;
      height: 200px;
      border-radius: 20px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .layout span {
      font-family: 'Trebuchet MS', sans-serif;
      font-size: 42px;
      font-weight: bold;
      color: white;
    }

    .conteudo {
      width: 100%;
      margin: 60px auto;
      overflow: visible; /* permitir que a imagem final ocupe espaço */
    }

    .conteudo .imagem {
      float: right;
      width: 40%;
      min-width: 250px;
      border-radius: 10px;
      margin-right: 15px;
      margin-left: 30px;
      margin-bottom: 15px;
    }

    .conteudo .texto {
      font-size: 20px;
      color: #333;
      line-height: 1.6;
      font-style: italic;
      font-weight: 300;
      margin-left: 35px;
      margin-right: 35px;
    }

    .conteudo .dados {
      font-size: 17px;
      font-weight: bold;
      font-style: normal;
      color: #666;
      margin-left: 35px;
      margin-right: 35px;
      margin-top: 55px;
      line-height: 1.3;
      white-space: pre-line;
    }

    .conteudo .dados span {
      color: black;
      font-weight: bold;
    }

    .linha-final {
      background-color: darkcyan;
      width: 100%;
      height: 18px;
      margin-top: 40px;
      border-radius: 0;
    }

    /* imagem-final: inicialmente auto, script força altura se necessário */
    .imagem-final {
      display: block;
      width: 100%;
      height: auto;
      object-fit: cover;
      margin-top: 60px;
      line-height: 0; /* remove gaps in some browsers */
      vertical-align: bottom;
      -webkit-user-drag: none;
      user-drag: none;
    }

    .whatsapp-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 40px 50px;
      background: rgba(0,0,0,0.6);
      border-radius: 70px;
      cursor: pointer;
      width: 450px;
      height: 120px;
      text-decoration: none;
      z-index: 9999;
    }

    .whatsapp-btn span {
      color: white;
      font-size: 50px;
      font-weight: bold;
      white-space: nowrap;
    }

    .whatsapp-btn img {
      width: 140px;
      height: 140px;
      margin-left: 25px;
    }

    .whatsapp-btn:hover {
      background: rgba(0,0,0,0.8);
    }
  </style>
</head>
<body>

  <div class="topo"><img src="unicorp.png" style="height:170px;" alt="logo"></div>
  <div class="topo2"></div>
  <div class="layout"><span>Documento emitido pela Instituição</span></div>

  <div class="conteudo">
    <img src="imagem.png" alt="Imagem Institucional" class="imagem">
    <div class="texto">
      <p>
        O código informado se refere a um documento devidamente emitido pela nossa instituição, porém a conferência dos dados apresentados é de inteira responsabilidade do usuário que está efetuando a validação do documento, verifique se os dados abaixos são o mesmo do documento impresso/original:
      </p>
    </div>

    <div class="dados" id="dados"></div>

    <div class="linha-final"></div>

    <img src="imagem-final.png" alt="Imagem Final" class="imagem-final" id="imagemFinal">
  </div>

  <a href="https://wa.me/5585985256372" target="_blank" class="whatsapp-btn">
    <span>Fale Conosco</span>
    <img src="whatsapp.png" alt="WhatsApp">
  </a>

  <script>
    // preenche dados (arquivo preencher.html com 6 linhas)
    function preencherDados(texto) {
      const linhas = texto.trim().split("\n");
      const div = document.getElementById("dados");
      div.innerHTML =
        "CÓDIGO: <span>" + (linhas[0] || "") + "</span><br>" +
        "DATA DE EMISSÃO: <span>" + (linhas[1] || "") + "</span><br>" +
        "ALUNO: <span>" + (linhas[2] || "") + "</span><br>" +
        "CPF: <span>" + (linhas[3] || "") + "</span><br>" +
        "CURSO: <span>" + (linhas[4] || "") + "</span><br>" +
        "DOCUMENTO: <span>" + (linhas[5] || "") + "</span>";
    }

    // ajusta a altura da imagem-final para eliminar espaço branco abaixo
    function adjustImageToViewport() {
      const img = document.getElementById('imagemFinal');
      if (!img) return;

      // força display block e sem margin-bottom
      img.style.display = 'block';
      img.style.marginBottom = '0';

      // posição do topo da imagem em relação à viewport
      const top = img.getBoundingClientRect().top;

      // espaço restante da viewport a partir do topo da imagem
      const remaining = Math.max(window.innerHeight - top, 0);

      // se houver espaço em branco positivo, força a altura da imagem para preencher
      if (remaining > 0) {
        img.style.height = remaining + 'px';
        img.style.objectFit = 'cover';
      } else {
        // permite altura natural quando não precisa preencher
        img.style.height = 'auto';
        img.style.objectFit = 'cover';
      }
    }

    // tentativa repetida para garantir ajuste após carregamento de imagem e mudanças dinâmicas
    function ensureNoBlank(attempts = 0) {
      adjustImageToViewport();

      // condição: se o documento for menor que a viewport, ajustar novamente
      const docHeight = document.documentElement.scrollHeight;
      if (docHeight < window.innerHeight && attempts < 20) {
        setTimeout(() => ensureNoBlank(attempts + 1), 60);
      }
    }

    // inicialização
    window.addEventListener('load', () => {
      // carregar dados
      fetch('preencher.html').then(r => r.text()).then(texto => {
        preencherDados(texto);
        // aguarda um pouco e garante ajuste
        setTimeout(ensureNoBlank, 40);
      }).catch(() => {
        // mesmo em erro, tenta ajustar
        setTimeout(ensureNoBlank, 40);
      });

      // observa redimensionamento
      window.addEventListener('resize', ensureNoBlank);

      // observa carregamento da própria imagem-final
      const img = document.getElementById('imagemFinal');
      if (img) {
        img.addEventListener('load', () => setTimeout(ensureNoBlank, 40));
      }
    });
  </script>

</body>
</html>
